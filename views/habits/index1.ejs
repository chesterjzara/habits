<!DOCTYPE html>
<html lang="en">
<head>
    <% include ../partials/head.ejs %>
    <script src="/js/habit-index1.js" charset="utf-8"></script>
    <script src="/js/sparkline.js" charset="utf-8"></script>
    <title>Habit Tracking | Habits</title>
</head>
<body>
    <% include ../partials/nav.ejs %>

    <div class='container'>
    <h1>All Habits</h1>

    
    <% for(let t = 0; t < tags.length; t++) { %>
        <div class="tag-habit-container border-top border-bottom">
            <div class="d-flex flex-row align-items-center tag-title ">
                <h1 class=""><%= tags[t] %> </h1>
                <a class="btn btn-success mx-4" href="/habits/new?category=<%= tags[t] %>">New Habit</a>
                <canvas class="sparkline"></canvas>
                
            </div>
                <div class="habit-data-container">
                    <div class="row date-row">
                        <div class="col"> </div>
                        <!-- Add the dates for each tag -->
                        <% for(let j = 5; j >= 0; j--) { %>
                            <div class="col text-center date-header" date-offset="<%=j%>"> </div>
                        <% } %>
                        <div class="col">  </div>
                    </div>
                    <% for(let i = 0; i < habits.length; i++) { %>
                        <% if (habits[i].tag === tags[t]) { %>
                            <div class="row habit-data-row" id="<%= habits[i]._id %>">
                                <div class="col"><a href="/habits/<%= habits[i]._id %>"><%= habits[i].name %></a></div>
                                <% for(let j = 5; j >= 0; j--) { %>
                                    <div date-offset="<%= j %>" class="habit-check-field col text-center"  habit-id="<%= habits[i]._id %>"> 
                                       O
                                    </div>
                                    
                                <% } %>
                                <div class="col"> Notes </div>
                            </div>
                        <% } %>
                    <% } %>
                </div>
        </div>
    <% } %>
</div>
</body>
</html>