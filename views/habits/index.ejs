<!DOCTYPE html>
<html lang="en">
<head>
    <% include ../partials/head.ejs %>
    <script src="/js/habit-index.js" charset="utf-8"></script>
    <title>Habit Tracking | Habits</title>
</head>
<body>
    <% include ../partials/nav.ejs %>

    <h1>All Habits</h1>

    
    <% for(let t = 0; t < tags.length; t++) { %>
        <div class="">
            <div class="row">
                <h1 class="col"><%= tags[t] %></h1>
                <a class="col" href="/habits/new?category=<%= tags[t] %>">New Habit</a>
            </div>
                <div class="">
                    <div class="row">
                        <div class="col"> </div>
                        <div class="col">  </div>
                        <!-- Add the dates for each tag -->
                        <% for(let j = 5; j >= 0; j--) { %>
                            <div class="col text-center"> <%= moment().subtract(j, 'days').format('ddd DD') %> </div>
                        <% } %>
                        <div class="col">  </div>
                    </div>
                    <% for(let i = 0; i < habits.length; i++) { %>
                        <% if (habits[i].tag === tags[t]) { %>
                            <div class="row">
                                <div class=col><a href="/habits/<%= habits[i]._id %>"><%= habits[i].name %></a></div>
                                <div class="col">Show More</div>
                                <% for(let j = 5; j >= 0; j--) { %>
                                    <div class="habit-checkbox col text-center" habit-id="<%= habits[i]._id %>">  
                                       O
                                    </div>
                                    
                                <% } %>
                                <div class="col"> Notes </div>
                            </div>
                        <% } %>
                    <% } %>
                </div>
        </div>
    <% } %>
</body>
</html>